"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[179],{51042:function(ne,W,e){var F=e(1413),C=e(67294),A=e(42110),o=e(98615),Z=function(I,c){return C.createElement(o.Z,(0,F.Z)((0,F.Z)({},I),{},{ref:c,icon:A.Z}))};Z.displayName="PlusOutlined",W.Z=C.forwardRef(Z)},89512:function(ne,W,e){e.d(W,{v:function(){return Z}});var F=e(80854),C=e(86738),A=e(71577),o=e(85893);function Z(r){var I,c,p,_,z=(0,F.useIntl)();return(0,o.jsx)(C.Z,{title:(I=r.title)!==null&&I!==void 0?I:z.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(c=r.title)!==null&&c!==void 0?c:z.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:r.loading},getPopupContainer:r.getPopupContainer,onConfirm:function(){var K;return r==null||(K=r.onClick)===null||K===void 0?void 0:K.call(r)},children:!r.children&&(0,o.jsx)(A.ZP,{type:(p=r.type)!==null&&p!==void 0?p:"link",size:(_=r.size)!==null&&_!==void 0?_:"small",disabled:r.disabled,children:(0,o.jsx)(F.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},75888:function(ne,W,e){e.d(W,{Z:function(){return H},l:function(){return K}});var F=e(15009),C=e.n(F),A=e(99289),o=e.n(A),Z=e(97857),r=e.n(Z),I=e(84140),c=e(69851),p=e(64317),_=e(80854),z=e(85893);function H(G){var $=(0,_.useIntl)(),L=(0,_.useRequest)(I.TB,{manual:!0,formatResult:function(T){var f,D,j=(f=(D=T.data)===null||D===void 0?void 0:D.map(function(R){return{label:R.deviceId,value:R.deviceId,key:R.deviceId}}))!==null&&f!==void 0?f:[];return j}}),S=L.run;return(0,z.jsx)(p.Z,r()({label:$.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),request:function(){return S({})}},G))}function K(G){var $=(0,_.useIntl)();return(0,z.jsx)(p.Z,r()({request:function(){var L=o()(C()().mark(function S(N){var T,f,D,j,R,J;return C()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return D=N.keyWords,j=D===void 0?"":D,i.next=3,(0,I.$h)({current:"1",size:"20",name:j});case 3:return R=i.sent,J=(T=(f=(0,c.LF)(R).data)===null||f===void 0?void 0:f.map(function(V){return{label:V.name,value:V.deviceId,key:V.deviceId}}))!==null&&T!==void 0?T:[],i.abrupt("return",J);case 6:case"end":return i.stop()}},S)}));return function(S){return L.apply(this,arguments)}}(),placeholder:$.formatMessage({id:"pages.personnel-manage.organization.department.person.tag.placeholder",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"}),rules:[{required:!0,message:$.formatMessage({id:"pages.device-manage.track.beacon.required",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"})}],fieldProps:{showSearch:!0,style:{minWidth:180}}},G))}},94037:function(ne,W,e){e.r(W),e.d(W,{default:function(){return ce}});var F=e(13769),C=e.n(F),A=e(97857),o=e.n(A),Z=e(89512),r=e(36255),I=e(69851),c=e(90930),p=e(9455),_=e(80854),z=e(54689),H=e(96365),K=e(93717),G=e(71577),$=e(5574),L=e.n($),S=e(51042),N=e(37476),T=e(12029),f=e(67294),D=e(88923),j=e(1413),R=e(91),J=e(66758),Q=e(97556),i=e(85893),V=["fieldProps","request","params","proFieldProps"],te=function(l,h){var M=l.fieldProps,b=l.request,E=l.params,g=l.proFieldProps,m=(0,R.Z)(l,V),s=(0,f.useContext)(J.Z);return(0,i.jsx)(Q.Z,(0,j.Z)({valueType:"cascader",fieldProps:(0,j.Z)({getPopupContainer:s.getPopupContainer},M),ref:h,request:b,params:E,filedConfig:{customLightMode:!0},proFieldProps:g},m))},q=f.forwardRef(te),re=e(96486);function X(n){return n==null?void 0:n.map(function(l){return{label:l.name,key:l.depId,value:l.depId,parentId:l.parentId,children:X(l.children)}})}function se(n){var l=(0,_.useIntl)(),h=(0,_.useRequest)(r.sz,{manual:!0,formatResult:function(g){if(g.code===I.OK)return X(g.data)}}),M=h.run,b=h.data;return f.useEffect(function(){M()},[n.visible]),(0,i.jsx)(q,o()({label:l.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),transform:function(g){var m,s={};return(0,re.set)(s,(m=n.name)!==null&&m!==void 0?m:"depId",(0,re.last)(g)),s},fieldProps:{options:b}},n))}var ee=e(75888),oe=e(70162),ae=e(5966),ue=e(22270),k=e(78045),u=e(90789),t=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],d=f.forwardRef(function(n,l){var h=n.fieldProps,M=n.options,b=n.radioType,E=n.layout,g=n.proFieldProps,m=n.valueEnum,s=(0,R.Z)(n,t);return(0,i.jsx)(Q.Z,(0,j.Z)((0,j.Z)({valueType:b==="button"?"radioButton":"radio",ref:l,valueEnum:(0,ue.h)(m,void 0)},s),{},{fieldProps:(0,j.Z)({options:M,layout:E},h),proFieldProps:g,filedConfig:{customLightMode:!0}}))}),v=f.forwardRef(function(n,l){var h=n.fieldProps,M=n.children;return(0,i.jsx)(k.ZP,(0,j.Z)((0,j.Z)({},h),{},{ref:l,children:M}))}),a=(0,u.G)(v,{valuePropName:"checked",ignoreWidth:!0}),w=a;w.Group=d,w.Button=k.ZP.Button,w.displayName="ProFormComponent";var O=w;function B(n){var l,h,M,b,E,g,m,s=(0,_.useIntl)(),P=n.record?[{uid:Date.now()+"",response:(l=n.record)===null||l===void 0?void 0:l.avatar,thumbUrl:(h=n.record)===null||h===void 0?void 0:h.avatar}]:void 0;return(0,i.jsxs)(f.Fragment,{children:[(0,i.jsx)(ae.Z,{name:"name",initialValue:(M=n.record)===null||M===void 0?void 0:M.name,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name.required.failure",defaultMessage:"\u59D3\u540D\u5FC5\u586B"})}]}),(0,i.jsx)(O.Group,{name:"sex",initialValue:(b=n.record)===null||b===void 0?void 0:b.sex,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),valueEnum:{Male:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.male",defaultMessage:"\u7537"}),Female:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.female",defaultMessage:"\u5973"})}}),(0,i.jsx)(ee.Z,{name:"tag",initialValue:(E=n.record)===null||E===void 0?void 0:E.tag,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"})}),(0,i.jsx)(oe.Q,{name:"typeId",initialValue:(g=n.record)===null||g===void 0?void 0:g.typeId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u4EBA\u5458\u7C7B\u578B"})}]}),(0,i.jsx)(se,{name:"depId",visible:n.visible,initialValue:(m=n.record)===null||m===void 0?void 0:m.depId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.parent.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"})}]}),(0,i.jsx)(D.h,{name:"avatar",initialValue:P,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),rules:[{message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u5934\u50CF"})}]})]})}function le(n){var l=(0,_.useIntl)(),h=T.Z.useForm(),M=L()(h,1),b=M[0],E=f.useState(),g=L()(E,2),m=g[0],s=g[1],P=(0,_.useRequest)(r.Mq,{manual:!0,onSuccess:function(x){if(x){var U;(U=n.refresh)===null||U===void 0||U.call(n),z.Z.success({message:l.formatMessage({id:"app.add.success",defaultMessage:"\u65B0\u5EFA\u6210\u529F"})})}}}),Y=P.run;return f.useEffect(function(){m||b.resetFields()},[m]),(0,i.jsx)(N.Y,{title:l.formatMessage({id:"pages.personnel-manage.organization.department.person.info.add",defaultMessage:"\u6DFB\u52A0\u4EBA\u5458"}),layout:"horizontal",form:b,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(G.ZP,{type:"primary",icon:(0,i.jsx)(S.Z,{}),children:l.formatMessage({id:"app.action.add",defaultMessage:"\u65B0\u5EFA"})}),onFinish:function(x){return Y(x)},children:(0,i.jsx)(B,{visible:m})})}function de(n){var l=(0,_.useIntl)(),h=T.Z.useForm(),M=L()(h,1),b=M[0],E=f.useState(),g=L()(E,2),m=g[0],s=g[1],P=(0,_.useRequest)(r.Ge,{manual:!0,onSuccess:function(x){if(x){var U;(U=n.refresh)===null||U===void 0||U.call(n),z.Z.success({message:l.formatMessage({id:"app.edit.success",defaultMessage:"\u66F4\u65B0\u6210\u529F"})})}}}),Y=P.run;return f.useEffect(function(){m||b.resetFields()},[m]),(0,i.jsx)(N.Y,{title:l.formatMessage({id:"pages.personnel-manage.organization.department.person.info.edit",defaultMessage:"\u7F16\u8F91\u4EBA\u5458"}),layout:"horizontal",form:b,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(G.ZP,{type:"link",size:"small",children:l.formatMessage({id:"app.action.edit",defaultMessage:"\u7F16\u8F91"})}),onFinish:function(x){var U={personnelId:n.record.personnelId||0},ie=x;return Y(U,ie)},children:(0,i.jsx)(B,{record:n.record,visible:m})})}var me=["current","pageSize"];function ce(){var n=(0,_.useIntl)(),l=(0,_.useRequest)(r.tE,{manual:!0,formatResult:function(s){return(0,I.LF)(s)}}),h=l.run,M=(0,_.useRequest)(r.bY,{manual:!0,fetchKey:function(s){return s.personnelId+""},onSuccess:function(s){s&&z.Z.success({message:n.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),b=M.run,E=M.fetches,g=[{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),dataIndex:"name",formItemProps:{name:"searchValue",label:null},renderFormItem:function(s,P,Y){var y=P.type,x=P.defaultRender,U=P.fieldProps;if(y==="form")return null;var ie=Y.getFieldValue("state");return ie!=="open"?(0,i.jsx)(H.Z,o()(o()({},U),{},{allowClear:!0,placeholder:n.formatMessage({id:"pages.personnel-manage.organization.department.person.search.value",defaultMessage:"\u8F93\u5165\u540D\u5B57\uFF0C\u6807\u7B7E\u5730\u5740\u7B49\u7B49"})})):x(s)}},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),dataIndex:"sex",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),dataIndex:"tag",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),dataIndex:"typeName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),dataIndex:"depName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),dataIndex:"avatar",render:function(s,P){return(0,i.jsx)(K.Z,{width:32,height:32,src:P.avatar})},search:!1},{title:n.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),search:!1,render:function(s,P,Y,y){var x;return(0,i.jsxs)(G.ZP.Group,{children:[(0,i.jsx)(de,{record:P,refresh:y==null?void 0:y.reload}),(0,i.jsx)(Z.v,{disabled:!P.personnelId,loading:E==null||(x=E[P.personnelId])===null||x===void 0?void 0:x.loading,onClick:function(){return b({personnelId:P.personnelId}).then(function(){return y==null?void 0:y.reload()})}})]})}}];return(0,i.jsx)(c._z,{childrenContentStyle:{padding:20},children:(0,i.jsx)(p.Z,{columns:g,toolBarRender:function(s){return[(0,i.jsx)(le,{refresh:s==null?void 0:s.reload},"add")]},request:function(s){var P=s.current,Y=s.pageSize,y=C()(s,me);return h(o()({current:P+"",size:Y+""},y))},options:{setting:!1}})})}},84140:function(ne,W,e){e.d(W,{$h:function(){return G},Ig:function(){return N},TB:function(){return ue},Um:function(){return se},WN:function(){return te},Zc:function(){return f},_s:function(){return J},aL:function(){return oe},bD:function(){return i},s_:function(){return re},uz:function(){return j},x2:function(){return L}});var F=e(13769),C=e.n(F),A=e(15009),o=e.n(A),Z=e(97857),r=e.n(Z),I=e(99289),c=e.n(I),p=e(80854),_=["deviceId"],z=["deviceId"],H=["gateway"],K=["gateway"];function G(u,t){return $.apply(this,arguments)}function $(){return $=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/beacon",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),$.apply(this,arguments)}function L(u,t){return S.apply(this,arguments)}function S(){return S=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/beacon",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),S.apply(this,arguments)}function N(u,t,d){return T.apply(this,arguments)}function T(){return T=c()(o()().mark(function u(t,d,v){var a,w;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return a=t.deviceId,w=C()(t,_),B.abrupt("return",(0,p.request)("/api/v1/beacon/".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},w),data:d},v||{})));case 2:case"end":return B.stop()}},u)})),T.apply(this,arguments)}function f(u,t){return D.apply(this,arguments)}function D(){return D=c()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=t.deviceId,a=C()(t,z),O.abrupt("return",(0,p.request)("/api/v1/beacon/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return O.stop()}},u)})),D.apply(this,arguments)}function j(u,t){return R.apply(this,arguments)}function R(){return R=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/gateway",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),R.apply(this,arguments)}function J(u,t){return Q.apply(this,arguments)}function Q(){return Q=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/gateway",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),Q.apply(this,arguments)}function i(u,t){return V.apply(this,arguments)}function V(){return V=c()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=t.gateway,a=C()(t,H),O.abrupt("return",(0,p.request)("/api/v1/gateway/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return O.stop()}},u)})),V.apply(this,arguments)}function te(u,t,d){return q.apply(this,arguments)}function q(){return q=c()(o()().mark(function u(t,d,v){var a,w;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return a=t.gateway,w=C()(t,K),B.abrupt("return",(0,p.request)("/api/v1/gateway".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},w),data:d},v||{})));case 2:case"end":return B.stop()}},u)})),q.apply(this,arguments)}function re(u,t){return X.apply(this,arguments)}function X(){return X=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/location",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),X.apply(this,arguments)}function se(u,t){return ee.apply(this,arguments)}function ee(){return ee=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/status/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ee.apply(this,arguments)}function oe(u,t){return ae.apply(this,arguments)}function ae(){return ae=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/status/gateway",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ae.apply(this,arguments)}function ue(u,t){return k.apply(this,arguments)}function k(){return k=c()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/unbound/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),k.apply(this,arguments)}}}]);
