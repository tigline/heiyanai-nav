"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[179],{51042:function(ne,Z,e){var z=e(1413),b=e(67294),K=e(42110),o=e(98615),$=function(C,p){return b.createElement(o.Z,(0,z.Z)((0,z.Z)({},C),{},{ref:p,icon:K.Z}))};$.displayName="PlusOutlined",Z.Z=b.forwardRef($)},89512:function(ne,Z,e){e.d(Z,{v:function(){return $}});var z=e(35312),b=e(86738),K=e(71577),o=e(85893);function $(r){var C,p,c,f,W=(0,z.useIntl)();return(0,o.jsx)(b.Z,{title:(C=r.title)!==null&&C!==void 0?C:W.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(p=r.title)!==null&&p!==void 0?p:W.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:r.loading},getPopupContainer:r.getPopupContainer,onConfirm:function(){var G;return r==null||(G=r.onClick)===null||G===void 0?void 0:G.call(r)},children:!r.children&&(0,o.jsx)(K.ZP,{type:(c=r.type)!==null&&c!==void 0?c:"link",size:(f=r.size)!==null&&f!==void 0?f:"small",disabled:r.disabled,children:(0,o.jsx)(z.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},75888:function(ne,Z,e){e.d(Z,{Z:function(){return H},l:function(){return G}});var z=e(15009),b=e.n(z),K=e(99289),o=e.n(K),$=e(97857),r=e.n($),C=e(84140),p=e(69851),c=e(64317),f=e(35312),W=e(85893);function H(w){var L=(0,f.useIntl)(),S=(0,f.useRequest)(C.TB,{manual:!0,formatResult:function(T){var _,R,I=(_=(R=T.data)===null||R===void 0?void 0:R.map(function(O){return{label:O.deviceId,value:O.deviceId,key:O.deviceId}}))!==null&&_!==void 0?_:[];return I}}),A=S.run;return(0,W.jsx)(c.Z,r()({label:L.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),request:function(){return A({})}},w))}function G(w){var L=(0,f.useIntl)();return(0,W.jsx)(c.Z,r()({request:function(){var S=o()(b()().mark(function A(N){var T,_,R,I,O,J;return b()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return R=N.keyWords,I=R===void 0?"":R,i.next=3,(0,C.$h)({current:"1",size:"20",name:I});case 3:return O=i.sent,J=(T=(_=(0,p.LF)(O).data)===null||_===void 0?void 0:_.map(function(V){return{label:V.name,value:V.deviceId,key:V.deviceId}}))!==null&&T!==void 0?T:[],i.abrupt("return",J);case 6:case"end":return i.stop()}},A)}));return function(A){return S.apply(this,arguments)}}(),placeholder:L.formatMessage({id:"pages.personnel-manage.organization.department.person.tag.placeholder",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"}),rules:[{required:!0,message:L.formatMessage({id:"pages.device-manage.track.beacon.required",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"})}],fieldProps:{showSearch:!0,style:{minWidth:180}}},w))}},94037:function(ne,Z,e){e.r(Z),e.d(Z,{default:function(){return pe}});var z=e(13769),b=e.n(z),K=e(97857),o=e.n(K),$=e(89512),r=e(36255),C=e(69851),p=e(90930),c=e(9455),f=e(35312),W=e(54689),H=e(96365),G=e(90156),w=e(71577),L=e(5574),S=e.n(L),A=e(51042),N=e(37476),T=e(12029),_=e(67294),R=e(88923),I=e(1413),O=e(91),J=e(66758),Q=e(86682),i=e(85893),V=["fieldProps","request","params","proFieldProps"],te=function(l,h){var M=l.fieldProps,y=l.request,E=l.params,g=l.proFieldProps,m=(0,O.Z)(l,V),s=(0,_.useContext)(J.Z);return(0,i.jsx)(Q.Z,(0,I.Z)({valueType:"cascader",fieldProps:(0,I.Z)({getPopupContainer:s.getPopupContainer},M),ref:h,request:y,params:E,filedConfig:{customLightMode:!0},proFieldProps:g},m))},k=_.forwardRef(te),re=e(96486);function X(n){return n==null?void 0:n.map(function(l){return{label:l.name,key:l.depId,value:l.depId,parentId:l.parentId,children:X(l.children)}})}function se(n){var l=(0,f.useIntl)(),h=(0,f.useRequest)(r.sz,{manual:!0,formatResult:function(g){if(g.code===C.OK)return X(g.data)}}),M=h.run,y=h.data;return _.useEffect(function(){M()},[n.visible]),(0,i.jsx)(k,o()({label:l.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),transform:function(g){var m,s={};return(0,re.set)(s,(m=n.name)!==null&&m!==void 0?m:"depId",(0,re.last)(g)),s},fieldProps:{options:y}},n))}var ee=e(75888),oe=e(70162),ae=e(5966),ue=e(22270),q=e(78045),u=e(90789),t=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],d=_.forwardRef(function(n,l){var h=n.fieldProps,M=n.options,y=n.radioType,E=n.layout,g=n.proFieldProps,m=n.valueEnum,s=(0,O.Z)(n,t);return(0,i.jsx)(Q.Z,(0,I.Z)((0,I.Z)({valueType:y==="button"?"radioButton":"radio",ref:l,valueEnum:(0,ue.h)(m,void 0)},s),{},{fieldProps:(0,I.Z)({options:M,layout:E},h),proFieldProps:g,filedConfig:{customLightMode:!0}}))}),v=_.forwardRef(function(n,l){var h=n.fieldProps,M=n.children;return(0,i.jsx)(q.ZP,(0,I.Z)((0,I.Z)({},h),{},{ref:l,children:M}))}),a=(0,u.G)(v,{valuePropName:"checked",ignoreWidth:!0}),B=a;B.Group=d,B.Button=q.ZP.Button,B.displayName="ProFormComponent";var x=B;function U(n){var l,h,M,y,E,g,m,s=(0,f.useIntl)(),P=n.record?[{uid:Date.now()+"",response:(l=n.record)===null||l===void 0?void 0:l.avatar,thumbUrl:(h=n.record)===null||h===void 0?void 0:h.avatar}]:void 0;return(0,i.jsxs)(_.Fragment,{children:[(0,i.jsx)(ae.Z,{name:"name",initialValue:(M=n.record)===null||M===void 0?void 0:M.name,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name.required.failure",defaultMessage:"\u59D3\u540D\u5FC5\u586B"})}]}),(0,i.jsx)(x.Group,{name:"sex",initialValue:(y=n.record)===null||y===void 0?void 0:y.sex,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),valueEnum:{Male:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.male",defaultMessage:"\u7537"}),Female:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.female",defaultMessage:"\u5973"})}}),(0,i.jsx)(ee.Z,{name:"tag",initialValue:(E=n.record)===null||E===void 0?void 0:E.tag,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"})}),(0,i.jsx)(oe.Q,{name:"typeId",initialValue:(g=n.record)===null||g===void 0?void 0:g.typeId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u4EBA\u5458\u7C7B\u578B"})}]}),(0,i.jsx)(se,{name:"depId",visible:n.visible,initialValue:(m=n.record)===null||m===void 0?void 0:m.depId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.parent.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"})}]}),(0,i.jsx)(R.h,{name:"avatar",initialValue:P,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),rules:[{message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u5934\u50CF"})}]})]})}function le(n){var l=(0,f.useIntl)(),h=T.Z.useForm(),M=S()(h,1),y=M[0],E=_.useState(),g=S()(E,2),m=g[0],s=g[1],P=(0,f.useRequest)(r.Mq,{manual:!0,onSuccess:function(D){if(D){var F;(F=n.refresh)===null||F===void 0||F.call(n),W.Z.success({message:l.formatMessage({id:"app.add.success",defaultMessage:"\u65B0\u5EFA\u6210\u529F"})})}}}),Y=P.run;return _.useEffect(function(){m||y.resetFields()},[m]),(0,i.jsx)(N.Y,{title:l.formatMessage({id:"pages.personnel-manage.organization.department.person.info.add",defaultMessage:"\u6DFB\u52A0\u4EBA\u5458"}),layout:"horizontal",form:y,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(w.ZP,{type:"primary",icon:(0,i.jsx)(A.Z,{}),children:l.formatMessage({id:"app.action.add",defaultMessage:"\u65B0\u5EFA"})}),onFinish:function(D){return Y(D)},children:(0,i.jsx)(U,{visible:m})})}function de(n){var l=(0,f.useIntl)(),h=T.Z.useForm(),M=S()(h,1),y=M[0],E=_.useState(),g=S()(E,2),m=g[0],s=g[1],P=(0,f.useRequest)(r.Ge,{manual:!0,onSuccess:function(D){if(D){var F;(F=n.refresh)===null||F===void 0||F.call(n),W.Z.success({message:l.formatMessage({id:"app.edit.success",defaultMessage:"\u66F4\u65B0\u6210\u529F"})})}}}),Y=P.run;return _.useEffect(function(){m||y.resetFields()},[m]),(0,i.jsx)(N.Y,{title:l.formatMessage({id:"pages.personnel-manage.organization.department.person.info.edit",defaultMessage:"\u7F16\u8F91\u4EBA\u5458"}),layout:"horizontal",form:y,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(w.ZP,{type:"link",size:"small",children:l.formatMessage({id:"app.action.edit",defaultMessage:"\u7F16\u8F91"})}),onFinish:function(D){var F={personnelId:n.record.personnelId||0},ie=D;return Y(F,ie)},children:(0,i.jsx)(U,{record:n.record,visible:m})})}var me=["current","pageSize"];function pe(){var n=(0,f.useIntl)(),l=(0,f.useRequest)(r.tE,{manual:!0,formatResult:function(s){return(0,C.LF)(s)}}),h=l.run,M=(0,f.useRequest)(r.bY,{manual:!0,fetchKey:function(s){return s.personnelId+""},onSuccess:function(s){s&&W.Z.success({message:n.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),y=M.run,E=M.fetches,g=[{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),dataIndex:"name",formItemProps:{name:"searchValue",label:null},renderFormItem:function(s,P,Y){var j=P.type,D=P.defaultRender,F=P.fieldProps;if(j==="form")return null;var ie=Y.getFieldValue("state");return ie!=="open"?(0,i.jsx)(H.Z,o()(o()({},F),{},{allowClear:!0,placeholder:n.formatMessage({id:"pages.personnel-manage.organization.department.person.search.value",defaultMessage:"\u8F93\u5165\u540D\u5B57\uFF0C\u6807\u7B7E\u5730\u5740\u7B49\u7B49"})})):D(s)}},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),dataIndex:"sex",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),dataIndex:"tag",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),dataIndex:"typeName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),dataIndex:"depName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),dataIndex:"avatar",render:function(s,P){return(0,i.jsx)(G.Z,{width:32,height:32,src:P.avatar})},search:!1},{title:n.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),search:!1,render:function(s,P,Y,j){var D;return(0,i.jsxs)(w.ZP.Group,{children:[(0,i.jsx)(de,{record:P,refresh:j==null?void 0:j.reload}),(0,i.jsx)($.v,{disabled:!P.personnelId,loading:E==null||(D=E[P.personnelId])===null||D===void 0?void 0:D.loading,onClick:function(){return y({personnelId:P.personnelId}).then(function(){return j==null?void 0:j.reload()})}})]})}}];return(0,i.jsx)(p._z,{childrenContentStyle:{padding:20},children:(0,i.jsx)(c.Z,{columns:g,toolBarRender:function(s){return[(0,i.jsx)(le,{refresh:s==null?void 0:s.reload},"add")]},request:function(s){var P=s.current,Y=s.pageSize,j=b()(s,me);return h(o()({current:P+"",size:Y+""},j))},options:{setting:!1}})})}},84140:function(ne,Z,e){e.d(Z,{$h:function(){return w},Ig:function(){return N},TB:function(){return ue},Um:function(){return se},WN:function(){return te},Zc:function(){return _},_s:function(){return J},aL:function(){return oe},bD:function(){return i},s_:function(){return re},uz:function(){return I},x2:function(){return S}});var z=e(13769),b=e.n(z),K=e(15009),o=e.n(K),$=e(97857),r=e.n($),C=e(99289),p=e.n(C),c=e(35312),f=["deviceId"],W=["deviceId"],H=["gateway"],G=["gateway"];function w(u,t){return L.apply(this,arguments)}function L(){return L=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/beacon",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),L.apply(this,arguments)}function S(u,t){return A.apply(this,arguments)}function A(){return A=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/beacon",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),A.apply(this,arguments)}function N(u,t,d){return T.apply(this,arguments)}function T(){return T=p()(o()().mark(function u(t,d,v){var a,B;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a=t.deviceId,B=b()(t,f),U.abrupt("return",(0,c.request)("/api/v1/beacon/".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},B),data:d},v||{})));case 2:case"end":return U.stop()}},u)})),T.apply(this,arguments)}function _(u,t){return R.apply(this,arguments)}function R(){return R=p()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=t.deviceId,a=b()(t,W),x.abrupt("return",(0,c.request)("/api/v1/beacon/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return x.stop()}},u)})),R.apply(this,arguments)}function I(u,t){return O.apply(this,arguments)}function O(){return O=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/gateway",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),O.apply(this,arguments)}function J(u,t){return Q.apply(this,arguments)}function Q(){return Q=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/gateway",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),Q.apply(this,arguments)}function i(u,t){return V.apply(this,arguments)}function V(){return V=p()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=t.gateway,a=b()(t,H),x.abrupt("return",(0,c.request)("/api/v1/gateway/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return x.stop()}},u)})),V.apply(this,arguments)}function te(u,t,d){return k.apply(this,arguments)}function k(){return k=p()(o()().mark(function u(t,d,v){var a,B;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a=t.gateway,B=b()(t,G),U.abrupt("return",(0,c.request)("/api/v1/gateway".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},B),data:d},v||{})));case 2:case"end":return U.stop()}},u)})),k.apply(this,arguments)}function re(u,t){return X.apply(this,arguments)}function X(){return X=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/location",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),X.apply(this,arguments)}function se(u,t){return ee.apply(this,arguments)}function ee(){return ee=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/status/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ee.apply(this,arguments)}function oe(u,t){return ae.apply(this,arguments)}function ae(){return ae=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/status/gateway",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ae.apply(this,arguments)}function ue(u,t){return q.apply(this,arguments)}function q(){return q=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/unbound/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),q.apply(this,arguments)}}}]);
