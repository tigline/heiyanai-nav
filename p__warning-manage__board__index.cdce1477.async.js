"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[138],{89512:function(A,M,e){e.d(M,{v:function(){return T}});var E=e(80854),l=e(86738),O=e(71577),m=e(85893);function T(s){var c,i,r,f,P=(0,E.useIntl)();return(0,m.jsx)(l.Z,{title:(c=s.title)!==null&&c!==void 0?c:P.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(i=s.title)!==null&&i!==void 0?i:P.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:s.loading},getPopupContainer:s.getPopupContainer,onConfirm:function(){var g;return s==null||(g=s.onClick)===null||g===void 0?void 0:g.call(s)},children:!s.children&&(0,m.jsx)(O.ZP,{type:(r=s.type)!==null&&r!==void 0?r:"link",size:(f=s.size)!==null&&f!==void 0?f:"small",disabled:s.disabled,children:(0,m.jsx)(E.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},3442:function(A,M,e){e.r(M),e.d(M,{default:function(){return z}});var E=e(97857),l=e.n(E),O=e(5574),m=e.n(O),T=e(13769),s=e.n(T),c=e(89512),i=e(59163),r=e(69851),f=e(90930),P=e(9455),D=e(80854),g=e(54689),B=e(71577),W=e(27484),C=e.n(W),x=e(76807),I=e(67294),v=e(85893),L=["createTime"],S=["current","pageSize"];function z(){var n=(0,D.useIntl)(),j=(0,I.useRef)(),w=(0,D.useModel)("messageSocket"),h=w.data;(0,I.useEffect)(function(){if(h){var o=JSON.parse(h);if(o.type==="Alarm"){var a;(a=j.current)===null||a===void 0||a.reload()}}},[h]);var y=(0,D.useRequest)(i.X8,{manual:!0,fetchKey:function(a){return a.alarmIds.join("-")},formatResult:function(a){return a},onSuccess:function(a){a.code===r.OK&&g.Z.success({message:n.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),Z=y.run,b=y.fetches,N=[{title:n.formatMessage({id:"pages.system.warning-manage.board.fence",defaultMessage:"\u6807\u7B7E"}),dataIndex:"deviceId"},{title:n.formatMessage({id:"pages.system.warning-manage.board.content",defaultMessage:"\u5185\u5BB9"}),ellipsis:!0,dataIndex:"content"},{title:n.formatMessage({id:"pages.system.warning-manage.board.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",valueEnum:{Unprocessed:{text:n.formatMessage({id:"pages.system.warning-manage.board.unprocessed",defaultMessage:"\u672A\u5904\u7406"}),status:"Error"},Processed:{text:n.formatMessage({id:"pages.system.warning-manage.board.processed",defaultMessage:"\u5DF2\u5904\u7406"}),status:"Success"},Ignored:{text:n.formatMessage({id:"pages.system.warning-manage.board.ignored",defaultMessage:"\u5FFD\u7565"}),status:"Default"}}},{title:n.formatMessage({id:"pages.system.warning-manage.board.type",defaultMessage:"\u7C7B\u578B"}),dataIndex:"type",valueEnum:{In:n.formatMessage({id:"pages.system.fence-manage.fence.type.in",defaultMessage:"\u8FDB\u5165"}),Out:n.formatMessage({id:"pages.system.fence-manage.fence.type.out",defaultMessage:"\u79BB\u5F00"})}},{title:n.formatMessage({id:"app.createTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateTimeRange",render:function(a,t){return(0,r.ZN)(t.createTime)}},{title:n.formatMessage({id:"app.updateTime",defaultMessage:"\u66F4\u65B0\u65F6\u95F4"}),dataIndex:"updateTime",valueType:"dateTimeRange",search:!1,render:function(a,t){return(0,r.ZN)(t.createTime)}},{title:n.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",key:"option",render:function(a,t,u,_){var d;return(0,v.jsxs)(B.ZP.Group,{children:[(0,v.jsx)(x.t,{record:t,refresh:_==null?void 0:_.reload}),(0,v.jsx)(c.v,{disabled:!t.alarmId,onClick:function(){return Z({alarmIds:[t.alarmId]}).then(function(){return _==null?void 0:_.reload()})},loading:b==null||(d=b[t.alarmId])===null||d===void 0?void 0:d.loading})]})}}];return(0,v.jsx)(f._z,{childrenContentStyle:{padding:20},children:(0,v.jsx)(P.Z,{options:{setting:!1},actionRef:j,columns:N,beforeSearchSubmit:function(a){var t,u,_=a.createTime,d=s()(a,L),p=_!=null?_:[],R=m()(p,2),U=R[0],K=R[1];return l()(l()({},d),{},{startTime:U?(t=C()(U))===null||t===void 0?void 0:t.unix():void 0,endTime:K?(u=C()(K))===null||u===void 0?void 0:u.unix():void 0})},rowKey:function(a){return a.alarmId+""},request:function(a){var t=a!=null?a:{},u=t.current,_=t.pageSize,d=s()(t,S);return(0,i.QP)(l()({current:u+"",size:_+""},d)).then(function(p){return(0,r.LF)(p)})}})})}}}]);
